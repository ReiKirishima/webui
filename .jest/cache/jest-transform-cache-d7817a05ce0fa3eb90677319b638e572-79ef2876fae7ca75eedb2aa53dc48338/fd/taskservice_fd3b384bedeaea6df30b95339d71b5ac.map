{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/task.service.ts","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wCAA2C;AAC3C,8CAAuD;AACvD,wDAA0C;AAE1C,0DAAuC;AACvC,6DAAyD;AACzD,mGAA4F;AAE5F,gEAA4D;AAC5D,yDAAqD;AAG9C,IAAM,WAAW,GAAjB,MAAM,WAAW;IAyGtB,YACY,QAAyB,EACzB,aAA4B,EAC9B,SAA2B;QAFzB,aAAQ,GAAR,QAAQ,CAAiB;QACzB,kBAAa,GAAb,aAAa,CAAe;QAC9B,cAAS,GAAT,SAAS,CAAkB;QA3G3B,gBAAW,GAAa;YAChC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;YACrC,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;SACtC,CAAC;QACQ,gBAAW,GAAgB;YACnC,OAAO,EAAE,IAAI;YACb,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,eAAe;SACtC,CAAC;IAMC,CAAC;IAEJ,cAAc;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED,cAAc,CAAC,kBAA0B;;QACvC,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,UAAU,CAAC,eAAe,CAAC,kBAAkB,EAAE;gBAC9D,QAAQ,EAAE,IAAI;gBACd,EAAE,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ;aAChC,CAAC,CAAC;YAEH,MAAM,IAAI,GAAG,MAAA,MAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,IAAI,EAAE,0CAAE,KAAK,0CAAE,MAAM,EAAE,CAAC;YAC/C,IAAI,CAAC,IAAI,EAAE,CAAC;gBACV,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACvC,CAAC;YAED,OAAO,IAAA,+DAA4B,EAAC,IAAI,CAAC,CAAC;QAC5C,CAAC;QAAC,WAAM,CAAC;YACP,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,0BAAW,CAAC,CAAC;QAC7C,CAAC;IACH,CAAC;IAED,eAAe,CAAC,kBAA0B;QACxC,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,UAAU,CAAC,eAAe,CAAC,kBAAkB,EAAE;gBAC9D,QAAQ,EAAE,IAAI;gBACd,EAAE,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ;aAChC,CAAC,CAAC;YAEH,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QACxC,CAAC;QAAC,WAAM,CAAC;YACP,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,0BAAW,CAAC,CAAC;QAC7C,CAAC;IACH,CAAC;IAED;;OAEG;IACH,sBAAsB,CAAC,kBAA0B,EAAE,UAAuB,IAAI,CAAC,WAAW;QACxF,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,KAAK,UAAU,CAAC;QACzF,OAAO,cAAS,CAAC,QAAQ,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;IACzD,CAAC;;AAxJU,kCAAW;;;;;;sBAAX,WAAW;IADvB,IAAA,iBAAU,EAAC,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;GACtB,WAAW,CAyJvB","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/task.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as cronParser from 'cron-parser';\nimport { Options as CronOptions } from 'cronstrue/dist/options';\nimport cronstrue from 'cronstrue/i18n';\nimport { invalidDate } from 'app/constants/invalid-date';\nimport { formatDistanceToNowShortened } from 'app/helpers/format-distance-to-now-shortened';\nimport { Option } from 'app/interfaces/option.interface';\nimport { LocaleService } from 'app/services/locale.service';\nimport { LanguageService } from './language.service';\n\n@Injectable({ providedIn: 'root' })\nexport class TaskService {\n  protected timeOptions: Option[] = [\n    { label: '00:00:00', value: '00:00' },\n    { label: '00:15:00', value: '00:15' },\n    { label: '00:30:00', value: '00:30' },\n    { label: '00:45:00', value: '00:45' },\n    { label: '01:00:00', value: '01:00' },\n    { label: '01:15:00', value: '01:15' },\n    { label: '01:30:00', value: '01:30' },\n    { label: '01:45:00', value: '01:45' },\n    { label: '02:00:00', value: '02:00' },\n    { label: '02:15:00', value: '02:15' },\n    { label: '02:30:00', value: '02:30' },\n    { label: '02:45:00', value: '02:45' },\n    { label: '03:00:00', value: '03:00' },\n    { label: '03:15:00', value: '03:15' },\n    { label: '03:30:00', value: '03:30' },\n    { label: '03:45:00', value: '03:45' },\n    { label: '04:00:00', value: '04:00' },\n    { label: '04:15:00', value: '04:15' },\n    { label: '04:30:00', value: '04:30' },\n    { label: '04:45:00', value: '04:45' },\n    { label: '05:00:00', value: '05:00' },\n    { label: '05:15:00', value: '05:15' },\n    { label: '05:30:00', value: '05:30' },\n    { label: '05:45:00', value: '05:45' },\n    { label: '06:00:00', value: '06:00' },\n    { label: '06:15:00', value: '06:15' },\n    { label: '06:30:00', value: '06:30' },\n    { label: '06:45:00', value: '06:45' },\n    { label: '07:00:00', value: '07:00' },\n    { label: '07:15:00', value: '07:15' },\n    { label: '07:30:00', value: '07:30' },\n    { label: '07:45:00', value: '07:45' },\n    { label: '08:00:00', value: '08:00' },\n    { label: '08:15:00', value: '08:15' },\n    { label: '08:30:00', value: '08:30' },\n    { label: '08:45:00', value: '08:45' },\n    { label: '09:00:00', value: '09:00' },\n    { label: '09:15:00', value: '09:15' },\n    { label: '09:30:00', value: '09:30' },\n    { label: '09:45:00', value: '09:45' },\n    { label: '10:00:00', value: '10:00' },\n    { label: '10:15:00', value: '10:15' },\n    { label: '10:30:00', value: '10:30' },\n    { label: '10:45:00', value: '10:45' },\n    { label: '11:00:00', value: '11:00' },\n    { label: '11:15:00', value: '11:15' },\n    { label: '11:30:00', value: '11:30' },\n    { label: '11:45:00', value: '11:45' },\n    { label: '12:00:00', value: '12:00' },\n    { label: '12:15:00', value: '12:15' },\n    { label: '12:30:00', value: '12:30' },\n    { label: '12:45:00', value: '12:45' },\n    { label: '13:00:00', value: '13:00' },\n    { label: '13:15:00', value: '13:15' },\n    { label: '13:30:00', value: '13:30' },\n    { label: '13:45:00', value: '13:45' },\n    { label: '14:00:00', value: '14:00' },\n    { label: '14:15:00', value: '14:15' },\n    { label: '14:30:00', value: '14:30' },\n    { label: '14:45:00', value: '14:45' },\n    { label: '15:00:00', value: '15:00' },\n    { label: '15:15:00', value: '15:15' },\n    { label: '15:30:00', value: '15:30' },\n    { label: '15:45:00', value: '15:45' },\n    { label: '16:00:00', value: '16:00' },\n    { label: '16:15:00', value: '16:15' },\n    { label: '16:30:00', value: '16:30' },\n    { label: '16:45:00', value: '16:45' },\n    { label: '17:00:00', value: '17:00' },\n    { label: '17:15:00', value: '17:15' },\n    { label: '17:30:00', value: '17:30' },\n    { label: '17:45:00', value: '17:45' },\n    { label: '18:00:00', value: '18:00' },\n    { label: '18:15:00', value: '18:15' },\n    { label: '18:30:00', value: '18:30' },\n    { label: '18:45:00', value: '18:45' },\n    { label: '19:00:00', value: '19:00' },\n    { label: '19:15:00', value: '19:15' },\n    { label: '19:30:00', value: '19:30' },\n    { label: '19:45:00', value: '19:45' },\n    { label: '20:00:00', value: '20:00' },\n    { label: '20:15:00', value: '20:15' },\n    { label: '20:30:00', value: '20:30' },\n    { label: '20:45:00', value: '20:45' },\n    { label: '21:00:00', value: '21:00' },\n    { label: '21:15:00', value: '21:15' },\n    { label: '21:30:00', value: '21:30' },\n    { label: '21:45:00', value: '21:45' },\n    { label: '22:00:00', value: '22:00' },\n    { label: '22:15:00', value: '22:15' },\n    { label: '22:30:00', value: '22:30' },\n    { label: '22:45:00', value: '22:45' },\n    { label: '23:00:00', value: '23:00' },\n    { label: '23:15:00', value: '23:15' },\n    { label: '23:30:00', value: '23:30' },\n    { label: '23:45:00', value: '23:45' },\n    { label: '23:59:00', value: '23:59' },\n  ];\n  protected cronOptions: CronOptions = {\n    verbose: true,\n    locale: this.language.currentLanguage,\n  };\n\n  constructor(\n    protected language: LanguageService,\n    protected localeService: LocaleService,\n    private translate: TranslateService,\n  ) {}\n\n  getTimeOptions(): Option[] {\n    return this.timeOptions;\n  }\n\n  getTaskNextRun(scheduleExpression: string): string {\n    try {\n      const schedule = cronParser.parseExpression(scheduleExpression, {\n        iterator: true,\n        tz: this.localeService.timezone,\n      });\n\n      const date = schedule?.next()?.value?.toDate();\n      if (!date) {\n        return this.translate.instant('N/A');\n      }\n\n      return formatDistanceToNowShortened(date);\n    } catch {\n      return this.translate.instant(invalidDate);\n    }\n  }\n\n  getTaskNextTime(scheduleExpression: string): Date | string {\n    try {\n      const schedule = cronParser.parseExpression(scheduleExpression, {\n        iterator: true,\n        tz: this.localeService.timezone,\n      });\n\n      return schedule.next().value.toDate();\n    } catch {\n      return this.translate.instant(invalidDate);\n    }\n  }\n\n  /**\n   * @deprecated Use crontabDescription pipe.\n   */\n  getTaskCronDescription(scheduleExpression: string, options: CronOptions = this.cronOptions): string {\n    options.use24HourTimeFormat = this.localeService.getPreferredTimeFormat() === 'HH:mm:ss';\n    return cronstrue.toString(scheduleExpression, options);\n  }\n}\n"],"version":3}