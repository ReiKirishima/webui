{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/language.service.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/language.service.ts"],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\nimport { UntilDestroy } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find } from 'lodash-es';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { WINDOW } from 'app/helpers/window.helper';\nimport { WebSocketService } from 'app/services/ws.service';\nimport { AppState } from 'app/store';\nimport { selectGeneralConfig } from 'app/store/system-config/system-config.selectors';\n\n@UntilDestroy()\n@Injectable({ providedIn: 'root' })\nexport class LanguageService {\n  currentLanguage: string = null;\n  availableLangs = [\n    {\n      code: 'af',\n      name: 'Afrikaans',\n    },\n    {\n      code: 'ar',\n      name: 'Arabic',\n    },\n    {\n      code: 'ast',\n      name: 'Asturian',\n    },\n    {\n      code: 'az',\n      name: 'Azerbaijani',\n    },\n    {\n      code: 'bg',\n      name: 'Bulgarian',\n    },\n    {\n      code: 'be',\n      name: 'Belarusian',\n    },\n    {\n      code: 'bn',\n      name: 'Bengali',\n    },\n    {\n      code: 'br',\n      name: 'Breton',\n    },\n    {\n      code: 'bs',\n      name: 'Bosnian',\n    },\n    {\n      code: 'ca',\n      name: 'Catalan',\n    },\n    {\n      code: 'cs',\n      name: 'Czech',\n    },\n    {\n      code: 'cy',\n      name: 'Welsh',\n    },\n    {\n      code: 'da',\n      name: 'Danish',\n    },\n    {\n      code: 'de',\n      name: 'Deutsch',\n    },\n    {\n      code: 'dsb',\n      name: 'Lower Sorbian',\n    },\n    {\n      code: 'el',\n      name: 'Greek',\n    },\n    {\n      name: 'English',\n      code: 'en',\n    },\n    {\n      code: 'en-au',\n      name: 'Australian English',\n    },\n    {\n      code: 'en-gb',\n      name: 'British English',\n    },\n    {\n      code: 'eo',\n      name: 'Esperanto',\n    },\n    {\n      name: 'Español',\n      code: 'es',\n    },\n    {\n      code: 'es-ar',\n      name: 'Argentinian Spanish',\n    },\n    {\n      code: 'es-co',\n      name: 'Colombian Spanish',\n    },\n    {\n      code: 'es-mx',\n      name: 'Mexican Spanish',\n    },\n    {\n      code: 'es-ni',\n      name: 'Nicaraguan Spanish',\n    },\n    {\n      code: 'es-ve',\n      name: 'Venezuelan Spanish',\n    },\n    {\n      code: 'et',\n      name: 'Estonian',\n    },\n    {\n      code: 'eu',\n      name: 'Basque',\n    },\n    {\n      code: 'fa',\n      name: 'Persian',\n    },\n    {\n      code: 'fi',\n      name: 'Finnish',\n    },\n    {\n      code: 'fr',\n      name: 'Français',\n    },\n    {\n      code: 'fy',\n      name: 'Frisian',\n    },\n    {\n      code: 'ga',\n      name: 'Irish',\n    },\n    {\n      code: 'gd',\n      name: 'Scottish Gaelic',\n    },\n    {\n      code: 'gl',\n      name: 'Galician',\n    },\n    {\n      code: 'he',\n      name: 'Hebrew',\n    },\n    {\n      code: 'hi',\n      name: 'Hindi',\n    },\n    {\n      code: 'hr',\n      name: 'Croatian',\n    },\n    {\n      code: 'hsb',\n      name: 'Upper Sorbian',\n    },\n    {\n      code: 'hu',\n      name: 'Hungarian',\n    },\n    {\n      code: 'ia',\n      name: 'Interlingua',\n    },\n    {\n      code: 'id',\n      name: 'Indonesian',\n    },\n    {\n      code: 'io',\n      name: 'Ido',\n    },\n    {\n      code: 'is',\n      name: 'Icelandic',\n    },\n    {\n      code: 'it',\n      name: 'Italiano',\n    },\n    {\n      code: 'ja',\n      name: 'Japanese',\n    },\n    {\n      code: 'ka',\n      name: 'Georgian',\n    },\n    {\n      code: 'kk',\n      name: 'Kazakh',\n    },\n    {\n      code: 'km',\n      name: 'Khmer',\n    },\n    {\n      code: 'kn',\n      name: 'Kannada',\n    },\n    {\n      code: 'ko',\n      name: 'Korean',\n    },\n    {\n      code: 'lb',\n      name: 'Luxembourgish',\n    },\n    {\n      code: 'lt',\n      name: 'Lithuanian',\n    },\n    {\n      code: 'lv',\n      name: 'Latvian',\n    },\n    {\n      code: 'mk',\n      name: 'Macedonian',\n    },\n    {\n      code: 'ml',\n      name: 'Malayalam',\n    },\n    {\n      code: 'mn',\n      name: 'Mongolian',\n    },\n    {\n      code: 'mr',\n      name: 'Marathi',\n    },\n    {\n      code: 'my',\n      name: 'Burmese',\n    },\n    {\n      code: 'nb',\n      name: 'Norwegian Bokmål',\n    },\n    {\n      code: 'ne',\n      name: 'Nepali',\n    },\n    {\n      code: 'nl',\n      name: 'Dutch',\n    },\n    {\n      code: 'nn',\n      name: 'Norwegian Nynorsk',\n    },\n    {\n      code: 'os',\n      name: 'Ossetic',\n    },\n    {\n      code: 'pa',\n      name: 'Punjabi',\n    },\n    {\n      code: 'pl',\n      name: 'Polish',\n    },\n    {\n      code: 'pt',\n      name: 'Portuguese',\n    },\n    {\n      code: 'pt-br',\n      name: 'Brazilian Portuguese',\n    },\n    {\n      code: 'ro',\n      name: 'Romanian',\n    },\n    {\n      code: 'ru',\n      name: 'Russian',\n    },\n    {\n      code: 'sk',\n      name: 'Slovak',\n    },\n    {\n      code: 'sl',\n      name: 'Slovenian',\n    },\n    {\n      code: 'sq',\n      name: 'Albanian',\n    },\n    {\n      code: 'sr',\n      name: 'Serbian',\n    },\n    {\n      code: 'sr-latn',\n      name: 'Serbian Latin',\n    },\n    {\n      code: 'sv',\n      name: 'Swedish',\n    },\n    {\n      code: 'sw',\n      name: 'Swahili',\n    },\n    {\n      code: 'ta',\n      name: 'Tamil',\n    },\n    {\n      code: 'te',\n      name: 'Telugu',\n    },\n    {\n      code: 'th',\n      name: 'Thai',\n    },\n    {\n      code: 'tr',\n      name: 'Turkish',\n    },\n    {\n      code: 'tt',\n      name: 'Tatar',\n    },\n    {\n      code: 'udm',\n      name: 'Udmurt',\n    },\n    {\n      code: 'uk',\n      name: 'Ukrainian',\n    },\n    {\n      code: 'ur',\n      name: 'Urdu',\n    },\n    {\n      code: 'vi',\n      name: 'Vietnamese',\n    },\n    {\n      code: 'zh-hant',\n      name: 'Traditional Chinese',\n    },\n    {\n      name: '中文',\n      code: 'zh-hans',\n    },\n  ];\n\n  constructor(\n    protected translate: TranslateService,\n    protected ws: WebSocketService,\n    private store$: Store<AppState>,\n    @Inject(WINDOW) private window: Window,\n  ) {\n  }\n\n  setLanguageFromBrowser(): Observable<boolean> {\n    if (this.currentLanguage) {\n      return of(true);\n    }\n\n    if (this.window.localStorage.language) {\n      return this.setLanguage(this.window.localStorage.getItem('language'));\n    }\n\n    const browserLang = this.translate.getBrowserLang();\n    return this.setLanguage(browserLang);\n  }\n\n  setLanguageFromMiddleware(): Observable<boolean> {\n    return this.store$.select(selectGeneralConfig).pipe(switchMap((config) => {\n      if (config?.language) {\n        return this.setLanguage(config.language);\n      }\n\n      return this.setLanguageFromBrowser();\n    }));\n  }\n\n  /**\n   * @return Observable that completes when translations have been loaded.\n   */\n  setLanguage(lang: string): Observable<boolean> {\n    if (find(this.availableLangs, { code: lang })) {\n      this.currentLanguage = lang;\n    } else {\n      this.currentLanguage = 'en';\n    }\n\n    return this.translate.use(this.currentLanguage).pipe(\n      map(() => true),\n    );\n  }\n}\n"],"version":3}