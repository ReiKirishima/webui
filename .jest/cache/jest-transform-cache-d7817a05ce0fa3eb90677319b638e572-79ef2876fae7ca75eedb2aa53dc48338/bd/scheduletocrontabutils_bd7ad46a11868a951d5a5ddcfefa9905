9c1878ad9ccfb50d24f6419f0d4c3a42
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.scheduleToCrontab = scheduleToCrontab;
exports.extractActiveHoursFromCron = extractActiveHoursFromCron;
function scheduleToCrontab(schedule) {
    if ('minute' in schedule) {
        return `${schedule.minute} ${schedule.hour} ${schedule.dom} ${schedule.month} ${schedule.dow}`;
    }
    return `0 ${schedule.hour} ${schedule.dom} ${schedule.month} ${schedule.dow}`;
}
function extractActiveHoursFromCron(crontab) {
    const parts = crontab.split(' ');
    const [minutes, hours] = parts;
    const formatTime = (hour, minute) => `${hour.padStart(2, '0')}:${minute.padStart(2, '0')}`;
    if ((hours === '0' || hours === '00') && (minutes === '0' || minutes === '00')) {
        return { start: '00:00', end: '23:59' };
    }
    const processRange = (range, minute) => {
        if (range.length === 2) {
            return { start: formatTime(range[0], minute), end: formatTime(range[1], minute) };
        }
        return { start: formatTime(range[0], minute), end: formatTime(range[0], minute) };
    };
    if (hours.includes('-')) {
        const hourRange = hours.split('-');
        return processRange(hourRange, minutes);
    }
    if (hours.includes(',')) {
        const hourList = hours.split(',');
        return {
            start: formatTime(hourList[0], minutes),
            end: formatTime(hourList[hourList.length - 1], minutes),
        };
    }
    return processRange([hours], minutes);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL21vZHVsZXMvc2NoZWR1bGVyL3V0aWxzL3NjaGVkdWxlLXRvLWNyb250YWIudXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7QUFFQSw4Q0FNQztBQUVELGdFQStCQztBQXZDRCxTQUFnQixpQkFBaUIsQ0FBQyxRQUFrQjtJQUNsRCxJQUFJLFFBQVEsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUN6QixPQUFPLEdBQUcsUUFBUSxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDakcsQ0FBQztJQUVELE9BQU8sS0FBSyxRQUFRLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDaEYsQ0FBQztBQUVELFNBQWdCLDBCQUEwQixDQUFDLE9BQWU7SUFDeEQsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxNQUFNLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUUvQixNQUFNLFVBQVUsR0FBRyxDQUFDLElBQVksRUFBRSxNQUFjLEVBQVUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztJQUVuSCxJQUFJLENBQUMsS0FBSyxLQUFLLEdBQUcsSUFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEtBQUssR0FBRyxJQUFJLE9BQU8sS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQy9FLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQztJQUMxQyxDQUFDO0lBRUQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFlLEVBQUUsTUFBYyxFQUFrQyxFQUFFO1FBQ3ZGLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUN2QixPQUFPLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEVBQUUsR0FBRyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUNwRixDQUFDO1FBQ0QsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEdBQUcsRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUM7SUFDcEYsQ0FBQyxDQUFDO0lBRUYsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDeEIsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNuQyxPQUFPLFlBQVksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEMsT0FBTztZQUNMLEtBQUssRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQztZQUN2QyxHQUFHLEVBQUUsVUFBVSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQztTQUN4RCxDQUFDO0lBQ0osQ0FBQztJQUVELE9BQU8sWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDeEMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9rYXJwb3Ytd29yay9UcnVlTkFTL3dlYnVpL3NyYy9hcHAvbW9kdWxlcy9zY2hlZHVsZXIvdXRpbHMvc2NoZWR1bGUtdG8tY3JvbnRhYi51dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlZHVsZSB9IGZyb20gJ2FwcC9pbnRlcmZhY2VzL3NjaGVkdWxlLmludGVyZmFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZVRvQ3JvbnRhYihzY2hlZHVsZTogU2NoZWR1bGUpOiBzdHJpbmcge1xuICBpZiAoJ21pbnV0ZScgaW4gc2NoZWR1bGUpIHtcbiAgICByZXR1cm4gYCR7c2NoZWR1bGUubWludXRlfSAke3NjaGVkdWxlLmhvdXJ9ICR7c2NoZWR1bGUuZG9tfSAke3NjaGVkdWxlLm1vbnRofSAke3NjaGVkdWxlLmRvd31gO1xuICB9XG5cbiAgcmV0dXJuIGAwICR7c2NoZWR1bGUuaG91cn0gJHtzY2hlZHVsZS5kb219ICR7c2NoZWR1bGUubW9udGh9ICR7c2NoZWR1bGUuZG93fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0QWN0aXZlSG91cnNGcm9tQ3Jvbihjcm9udGFiOiBzdHJpbmcpOiB7IHN0YXJ0OiBzdHJpbmc7IGVuZDogc3RyaW5nIH0ge1xuICBjb25zdCBwYXJ0cyA9IGNyb250YWIuc3BsaXQoJyAnKTtcbiAgY29uc3QgW21pbnV0ZXMsIGhvdXJzXSA9IHBhcnRzO1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAoaG91cjogc3RyaW5nLCBtaW51dGU6IHN0cmluZyk6IHN0cmluZyA9PiBgJHtob3VyLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWludXRlLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICBpZiAoKGhvdXJzID09PSAnMCcgfHwgaG91cnMgPT09ICcwMCcpICYmIChtaW51dGVzID09PSAnMCcgfHwgbWludXRlcyA9PT0gJzAwJykpIHtcbiAgICByZXR1cm4geyBzdGFydDogJzAwOjAwJywgZW5kOiAnMjM6NTknIH07XG4gIH1cblxuICBjb25zdCBwcm9jZXNzUmFuZ2UgPSAocmFuZ2U6IHN0cmluZ1tdLCBtaW51dGU6IHN0cmluZyk6IHsgc3RhcnQ6IHN0cmluZzsgZW5kOiBzdHJpbmcgfSA9PiB7XG4gICAgaWYgKHJhbmdlLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHsgc3RhcnQ6IGZvcm1hdFRpbWUocmFuZ2VbMF0sIG1pbnV0ZSksIGVuZDogZm9ybWF0VGltZShyYW5nZVsxXSwgbWludXRlKSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBzdGFydDogZm9ybWF0VGltZShyYW5nZVswXSwgbWludXRlKSwgZW5kOiBmb3JtYXRUaW1lKHJhbmdlWzBdLCBtaW51dGUpIH07XG4gIH07XG5cbiAgaWYgKGhvdXJzLmluY2x1ZGVzKCctJykpIHtcbiAgICBjb25zdCBob3VyUmFuZ2UgPSBob3Vycy5zcGxpdCgnLScpO1xuICAgIHJldHVybiBwcm9jZXNzUmFuZ2UoaG91clJhbmdlLCBtaW51dGVzKTtcbiAgfVxuXG4gIGlmIChob3Vycy5pbmNsdWRlcygnLCcpKSB7XG4gICAgY29uc3QgaG91ckxpc3QgPSBob3Vycy5zcGxpdCgnLCcpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogZm9ybWF0VGltZShob3VyTGlzdFswXSwgbWludXRlcyksXG4gICAgICBlbmQ6IGZvcm1hdFRpbWUoaG91ckxpc3RbaG91ckxpc3QubGVuZ3RoIC0gMV0sIG1pbnV0ZXMpLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gcHJvY2Vzc1JhbmdlKFtob3Vyc10sIG1pbnV0ZXMpO1xufVxuIl0sInZlcnNpb24iOjN9