{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/directory-service/components/leave-domain-dialog/leave-domain-dialog.component.ts","mappings":";;;;;;;;;AAAA,wCAAmE;AACnE,0CAA8E;AAC9E,qDAAqD;AACrD,qDAAwF;AACxF,yDAAqE;AACrE,8CAAwE;AACxE,qGAAgG;AAChG,6DAAoD;AACpD,mDAA2C;AAC3C,sFAA0F;AAE1F,sEAAkE;AAClE,sHAAiH;AACjH,0GAAqG;AACrG,8EAAyE;AACzE,qFAAiF;AACjF,uEAAmE;AACnE,8EAAyE;AACzE,wDAA2D;AAqBpD,IAAM,0BAA0B,GAAhC,MAAM,0BAA0B;IAQrC,YACU,YAAiC,EACjC,WAAwB,EACxB,MAAwB,EACxB,EAAoB,EACpB,SAAmD,EACnD,aAA4B,EAC5B,QAAyB,EACzB,SAA2B;QAP3B,iBAAY,GAAZ,YAAY,CAAqB;QACjC,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAkB;QACxB,OAAE,GAAF,EAAE,CAAkB;QACpB,cAAS,GAAT,SAAS,CAA0C;QACnD,kBAAa,GAAb,aAAa,CAAe;QAC5B,aAAQ,GAAR,QAAQ,CAAiB;QACzB,cAAS,GAAT,SAAS,CAAkB;QAfrC,SAAI,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YAC5B,QAAQ,EAAE,CAAC,EAAE,EAAE,kBAAU,CAAC,QAAQ,CAAC;YACnC,QAAQ,EAAE,CAAC,EAAE,EAAE,kBAAU,CAAC,QAAQ,CAAC;SACpC,CAAC,CAAC;QAEgB,SAAI,GAAG,gBAAI,CAAC;IAW5B,CAAC;IAEJ,QAAQ;QACN,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;QAE/B,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,uBAAuB,EAAE,CAAC,MAA8B,CAAC,CAAC;aACnE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,IAAA,8BAAc,EAAC,IAAI,CAAC,CAAC;aACpD,SAAS,CAAC;YACT,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE;gBACZ,IAAI,GAAG,CAAC,KAAK,KAAK,yBAAQ,CAAC,OAAO,EAAE,CAAC;oBACnC,OAAO;gBACT,CAAC;gBAED,IAAI,CAAC,QAAQ,CAAC,OAAO,CACnB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,0CAAuB,CAAC,sBAAsB,CAAC,WAAW,CAAC,CACnF,CAAC;gBAEF,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAC7B,CAAC;YACD,KAAK,EAAE,CAAC,KAAc,EAAE,EAAE;gBACxB,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;YAChE,CAAC;SACF,CAAC,CAAC;IACP,CAAC;;AAxCU,gEAA0B;;;;;;;;;;;qCAA1B,0BAA0B;IAnBtC,IAAA,4BAAY,GAAE;IACd,IAAA,gBAAS,EAAC;QACT,QAAQ,EAAE,wBAAwB;QAClC,yDAAmD;QAEnD,eAAe,EAAE,8BAAuB,CAAC,MAAM;QAC/C,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE;YACP,uBAAc;YACd,2BAAmB;YACnB,qCAAgB;YAChB,6CAAoB;YACpB,kBAAS;YACT,uBAAc;YACd,8BAAa;YACb,iDAAsB;YACtB,sBAAe;SAChB;KACF,CAAC;GACW,0BAA0B,CAyCtC","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/directory-service/components/leave-domain-dialog/leave-domain-dialog.component.ts"],"sourcesContent":["import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormBuilder, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { MatButton } from '@angular/material/button';\nimport { MatDialogRef, MatDialogTitle, MatDialogClose } from '@angular/material/dialog';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { TranslateService, TranslateModule } from '@ngx-translate/core';\nimport { RequiresRolesDirective } from 'app/directives/requires-roles/requires-roles.directive';\nimport { JobState } from 'app/enums/job-state.enum';\nimport { Role } from 'app/enums/role.enum';\nimport { helptextActiveDirectory } from 'app/helptext/directory-service/active-directory';\nimport { LeaveActiveDirectory } from 'app/interfaces/active-directory-config.interface';\nimport { DialogService } from 'app/modules/dialog/dialog.service';\nimport { FormActionsComponent } from 'app/modules/forms/ix-forms/components/form-actions/form-actions.component';\nimport { IxInputComponent } from 'app/modules/forms/ix-forms/components/ix-input/ix-input.component';\nimport { AppLoaderService } from 'app/modules/loader/app-loader.service';\nimport { SnackbarService } from 'app/modules/snackbar/services/snackbar.service';\nimport { TestDirective } from 'app/modules/test-id/test.directive';\nimport { ErrorHandlerService } from 'app/services/error-handler.service';\nimport { WebSocketService } from 'app/services/ws.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'ix-leave-domain-dialog',\n  templateUrl: './leave-domain-dialog.component.html',\n  styleUrls: ['./leave-domain-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    MatDialogTitle,\n    ReactiveFormsModule,\n    IxInputComponent,\n    FormActionsComponent,\n    MatButton,\n    MatDialogClose,\n    TestDirective,\n    RequiresRolesDirective,\n    TranslateModule,\n  ],\n})\nexport class LeaveDomainDialogComponent {\n  form = this.formBuilder.group({\n    username: ['', Validators.required],\n    password: ['', Validators.required],\n  });\n\n  protected readonly Role = Role;\n\n  constructor(\n    private errorHandler: ErrorHandlerService,\n    private formBuilder: FormBuilder,\n    private loader: AppLoaderService,\n    private ws: WebSocketService,\n    private dialogRef: MatDialogRef<LeaveDomainDialogComponent>,\n    private dialogService: DialogService,\n    private snackbar: SnackbarService,\n    private translate: TranslateService,\n  ) {}\n\n  onSubmit(): void {\n    const params = this.form.value;\n\n    this.ws.job('activedirectory.leave', [params as LeaveActiveDirectory])\n      .pipe(this.loader.withLoader(), untilDestroyed(this))\n      .subscribe({\n        next: (job) => {\n          if (job.state !== JobState.Success) {\n            return;\n          }\n\n          this.snackbar.success(\n            this.translate.instant(helptextActiveDirectory.ad_leave_domain_dialog.success_msg),\n          );\n\n          this.dialogRef.close(true);\n        },\n        error: (error: unknown) => {\n          this.dialogService.error(this.errorHandler.parseError(error));\n        },\n      });\n  }\n}\n"],"version":3}